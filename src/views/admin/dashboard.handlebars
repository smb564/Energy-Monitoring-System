<div class="row">
    <div class="col-md-12">
        <div class="box box-success">
            <div class="box-body">
                <div class="row">
                    <div class="col-md-2">
                        <div class="form-group">
                            <label>Date range:</label>

                            <div class="input-group">
                                <div class="input-group-addon">
                                    <i class="fa fa-calendar"></i>
                                </div>
                                <input type="text" class="form-control pull-right" id="reservation" value="">
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label>Select Area</label>
                            <select class="form-control select2" multiple="multiple" id="area">
                                <option value="All Areas" selected="selected">All Areas</option>
                            </select>
                        </div>

                    </div>

                    <div class="col-md-3">
                        <div class="form-group">
                            <label>Select Connection Type</label>
                            <select class="form-control select2" multiple="multiple" id="connectionType">
                                <option value="All Connections" selected="selected">All Connections</option>
                            </select>
                        </div>

                    </div>

                    <div class="col-md-2">
                        <br>
                        <div class="form-group">
                            <button type="button" class="btn btn-success" id="submit">Generate Report</button>
                        </div>

                    </div>
                </div>
            </div>
            <!-- /.box-body -->
        </div>
        <!-- /.box -->
    </div>
</div>
<div class="row">
    <div class="col-lg-3 col-xs-6">
        <!-- small box -->
        <div class="small-box bg-aqua">
            <div class="inner">
                <h3 id="complaints"></h3>

                <p>Complaints</p>
            </div>
            <div class="icon">
                <i class="fa  fa-comments-o"></i>
            </div>
            <a href="#" class="small-box-footer">
            </a>
        </div>
    </div>
    <!-- ./col -->
    <div class="col-lg-3 col-xs-6">
        <!-- small box -->
        <div class="small-box bg-green">
            <div class="inner">
                <h3 id="breakdown"></h3>

                <p>Breakdowns</p>
            </div>
            <div class="icon">
                <i class="ion ion-stats-bars"></i>
            </div>
            <a href="#" class="small-box-footer">
            </a>
        </div>
    </div>
    <!-- ./col -->
    <div class="col-lg-3 col-xs-6">
        <!-- small box -->
        <div class="small-box bg-yellow">
            <div class="inner">
                <h3 id="connectionReq"></h3>

                <p>New Connection Requests</p>
            </div>
            <div class="icon">
                <i class="ion ion-person-add"></i>
            </div>
            <a href="#" class="small-box-footer">
            </a>
        </div>
    </div>
    <!-- ./col -->
    <div class="col-lg-3 col-xs-6">
        <!-- small box -->
        <div class="small-box bg-red">
            <div class="inner">
                <h3 id="powercuts"></h3>
                <p>Power Cuts </p>
            </div>
            <div class="icon">
                <i class="fa fa-bolt"></i>
            </div>
            <a href="#" class="small-box-footer">

            </a>
        </div>
    </div>
    <!-- ./col -->
</div>
<div class="row">
    <div class="col-md-6">
        <div class="box">
            <div class="box-header with-border">
                <h3 class="box-title">Energy Consumption Report</h3>

                <div class="box-tools pull-right">
                    <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                    </button>
                    <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i>
                    </button>
                </div>
            </div>
            <!-- /.box-header -->
            <div class="box-body">
                <div class="row">
                    <div class="col-md-12">
                        <p class="text-center">
                            <strong id="energy_header"></strong>
                        </p>

                        <div class="chart">
                            <!-- Sales Chart Canvas -->
                            <canvas id="salesChart" style="height: 300px;"></canvas>
                        </div>
                        <!-- /.chart-responsive -->
                    </div>
                    <!-- /.col -->
                    <!--<div class="col-md-4">-->
                    <!---->
                    <!--</div>-->
                    <!-- /.col -->
                </div>
                <!-- /.row -->
            </div>
            <!-- ./box-body -->
            <div class="box-footer">
                <div class="row">
                    <div class="col-sm-12 col-xs-12">
                        <div class="description-block border-right">
                            <h5 id="total_energy" class="description-header"></h5>
                            <span class="description-text">TOTAL ENERGY CONSUMPTION</span>
                        </div>
                        <!-- /.description-block -->
                    </div>
                </div>
                <!-- /.row -->
            </div>
            <!-- /.box-footer -->
        </div>
        <!-- /.box -->
    </div>
    <div class="col-md-6">
        <div class="box box-success">
            <div class="box-header with-border">
                <h3 class="box-title">Income Comparison Report</h3>

                <div class="box-tools pull-right">
                    <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                    </button>
                    <button type="button" class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="box-body">
                <div class="col-md-12">
                    <p class="text-center">
                        <strong id="income_header"></strong>
                    </p>
                    <div class="chart">
                        <canvas id="barChart" style="height:300px"></canvas>
                    </div>
                </div>
            </div>
            <!-- /.box-body -->
            <div class="box-footer">
                <div class="row">
                    <div class="col-sm-6 col-xs-6">
                        <div class="description-block border-right">
                            <h5 id="total_expected_income" class="description-header"></h5>
                            <span class="description-text">TOTAL EXPECTED INCOME</span>
                        </div>
                        <!-- /.description-block -->
                    </div>
                    <div class="col-sm-6 col-xs-6">
                        <div class="description-block border-right">
                            <h5 id="total_income" class="description-header"></h5>
                            <span class="description-text">TOTAL INCOME</span>
                        </div>
                        <!-- /.description-block -->
                    </div>
                </div>
                <!-- /.row -->
            </div>
        </div>
        <!-- /.box -->
    </div>
    <!-- /.col -->
</div>
<!-- /.row -->
<script>
    var salesChartData, salesChartOptions, salesChart, barChart, barChartData, barChartOptions, salesChartCanvas, barChartCanvas, areas;
    $(function () {
        $('#reservation').daterangepicker()
        $('#reservation').val(moment().subtract(365, 'days').format('MM/D/YYYY') + " - " + moment().format('MM/D/YYYY'));
        salesChartCanvas = $("#salesChart").get(0).getContext("2d");
        // This will get the first returned node in the jQuery collection.


        salesChartData = {
            labels: [],
            datasets: [
                {
                    label: "Energy Consumption",
                    backgroundColor: "#00c0ef",
                    strokeColor: "rgb(210, 214, 222)",
                    pointColor: "rgb(210, 214, 222)",
                    pointStrokeColor: "#c1c7d1",
                    pointHighlightFill: "#fff",
                    pointHighlightStroke: "rgb(220,220,220)",
                    data: []
                }
            ]
        };

        salesChartOptions = {
            //Boolean - If we should show the scale at all
            showScale: true,
            //Boolean - Whether grid lines are shown across the chart
            scaleShowGridLines: false,
            //String - Colour of the grid lines
            scaleGridLineColor: "rgba(0,0,0,.05)",
            //Number - Width of the grid lines
            scaleGridLineWidth: 1,
            //Boolean - Whether to show horizontal lines (except X axis)
            scaleShowHorizontalLines: true,
            //Boolean - Whether to show vertical lines (except Y axis)
            scaleShowVerticalLines: true,
            //Boolean - Whether the line is curved between points
            bezierCurve: true,
            //Number - Tension of the bezier curve between points
            bezierCurveTension: 0.3,
            //Boolean - Whether to show a dot for each point
            pointDot: false,
            //Number - Radius of each point dot in pixels
            pointDotRadius: 4,
            //Number - Pixel width of point dot stroke
            pointDotStrokeWidth: 1,
            //Number - amount extra to add to the radius to cater for hit detection outside the drawn point
            pointHitDetectionRadius: 20,
            //Boolean - Whether to show a stroke for datasets
            datasetStroke: true,
            //Number - Pixel width of dataset stroke
            datasetStrokeWidth: 2,
            //Boolean - Whether to fill the dataset with a color
            datasetFill: false,
            //String - A legend template
            legendTemplate: "<ul class=\"<%=name.toLowerCase()%>-legend\"><% for (var i=0; i<datasets.length; i++){%><li><span style=\"background-color:<%=datasets[i].lineColor%>\"></span><%=datasets[i].label%></li><%}%></ul>",
            //Boolean - whether to maintain the starting aspect ratio or not when responsive, if set to false, will take up entire container
            maintainAspectRatio: false,
            //Boolean - whether to make the chart responsive to window resizing
            responsive: true,
            scales: {
                yAxes: [
                    {
                        ticks: {
                            callback: function (label, index, labels) {
                                return label + 'kWh';
                            }
                        },
                        scaleLabel: {
                            display: true,
                            labelString: 'Energy Consumption'
                        }
                    }
                ]
            }
        };

        areas = [{id: "Bandarawela", text: 'Bandarawela'}, {id: "a", text: 'a'}, {id: "b", text: 'b'}, {
            id: "c",
            text: 'c'
        }];

        connections = [{id: "enterprises", text: 'Enterprises'}, {
            id: "houses",
            text: 'Houses'
        }, {id: "government organizations", text: 'Government Organizations'}, {
            id: "religious establishments",
            text: 'Religious Establishments'
        }];

        $("#connectionType").select2({
            data: connections,
            maximumSelectionLength: connections.length - 1
        });
//        $("#area").select2({
//            data: areas,
//            maximumSelectionLength: connections.length - 1
//        });

        barChartCanvas = $("#barChart").get(0).getContext("2d");
        barChartData = {
            datasets: [
                {
                    label: "Expected Income",
                    backgroundColor: "#00045a",
                },
                {
                    label: "Income",
                    backgroundColor: "#dd4b39",
                }

            ]
        };
        barChartOptions = {
            //Boolean - Whether the scale should start at zero, or an order of magnitude down from the lowest value
            scaleBeginAtZero: true,
            //Boolean - Whether grid lines are shown across the chart
            scaleShowGridLines: true,
            //String - Colour of the grid lines
            scaleGridLineColor: "rgba(0,0,0,.05)",
            //Number - Width of the grid lines
            scaleGridLineWidth: 1,
            //Boolean - Whether to show horizontal lines (except X axis)
            scaleShowHorizontalLines: true,
            //Boolean - Whether to show vertical lines (except Y axis)
            scaleShowVerticalLines: true,
            //Boolean - If there is a stroke on each bar
            barShowStroke: true,
            //Number - Pixel width of the bar stroke
            barStrokeWidth: 2,
            //Number - Spacing between each of the X value sets
            barValueSpacing: 5,
            //Number - Spacing between data sets within X values
            barDatasetSpacing: 1,
            //String - A legend template
            legendTemplate: "<ul class=\"<%=name.toLowerCase()%>-legend\"><% for (var i=0; i<datasets.length; i++){%><li><span style=\"background-color:<%=datasets[i].fillColor%>\"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>",
            //Boolean - whether to make the chart responsive
            responsive: true,
            maintainAspectRatio: true,
            datasetFill: false
        };

    });

</script>
<script src="js/adminDashboard.js"></script>
